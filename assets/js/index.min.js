function buildCheckboxes(a,b,c){d3.select(".chooseNetwork").append("ul").attr("id","networkSelect").selectAll("li").data(a).enter().append("li").html(function(a,d){var e="<input type='checkbox' id='"+a+"' name='"+a+"' checked><label for='"+a+"'><span><svg height='20' width='20'><circle cx='10' cy='10' r='10' fill='"+b[d]+"' class='dot"+d+"' opacity='"+c+"'></circle><polygon fill='#fff' points='8.163,11.837 6.062,9.737 3.963,11.837 6.062,13.938 8.163,16.037 16.037,8.162 13.938,6.062'/></polygon></svg></span> "+a+"</label>";return e})}function fadeOutArcs(a){function b(b){d3.select(".chart").select("svg").selectAll(b).transition().duration(200).attr("opacity",a)}function c(a){d3.select(".chart").select("svg").selectAll(a).transition().duration(200).attr("opacity","0")}jQuery("#networkSelect").change(function(){$("#Twitter").attr("checked")?b("path.arc0"):c("path.arc0"),$("#Facebook").attr("checked")?b("path.arc1"):c("path.arc1"),$("#Academiaedu").attr("checked")?b("path.arc2"):c("path.arc2"),$("#ResearchGate").attr("checked")?b("path.arc3"):c("path.arc3"),$("#LinkedIn").attr("checked")?b("path.arc4"):c("path.arc4"),$("#Mendeley").attr("checked")?b("path.arc5"):c("path.arc5")})}function buildSVG(a,b,c){d3.select(".chart").append("svg").attr("width",b+a.left+a.right).attr("height",c+a.top+a.bottom)}function buildTicks(a,b,c,d,e){var f=d3.select(".chart").select("svg").append("g").attr("transform","translate("+(b+a.left+a.right)/2+","+(c+a.top+a.bottom)/2+")");f.selectAll("text").data(e).enter().append("svg:text").attr("y",function(a){return-1*d(a)}).attr("text-anchor","middle").attr("dy",".35em").text(function(a){return a+"%"})}function buildLabels(a,b,c,d,e,f,g){var h=d3.select(".chart").select("svg").append("g").attr("transform","translate("+(b+a.left+a.right)/2+","+(c+a.top+a.bottom)/2+")");h.selectAll("text").data(f).enter().append("svg:text").attr("class","questions").attr("x",function(a,b){var c=d(1.1*d3.max(e))*Math.cos(g*b-4.25*g);return c}).attr("y",function(a,b){var c=d(1.1*d3.max(e))*Math.sin(g*b-4.25*g);return c}).attr("text-anchor","middle").attr("dy",".35em").text(function(a){return a})}function buildLines(a,b,c,d,e,f,g,h){for(var i=d3.select(".chart").select("svg").append("g").attr("transform","translate("+(b+a.left+a.right)/2+","+(c+a.top+a.bottom)/2+")"),j=0;f>j;j++)i.append("line").attr("x1","0").attr("y1","0").attr("x2","0").attr("y2",-d(e[e.length-1])).attr("stroke",g).attr("stroke-width","1px").attr("fill","none").attr("transform","rotate("+(h+2*h*j)+")")}function buildScales(a,b,c,d,e,f){var g=d3.select(".chart").select("svg").append("g").attr("transform","translate("+(b+a.left+a.right)/2+","+(c+a.top+a.bottom)/2+")");g.selectAll("circle").data(e).enter().append("circle").attr("cx",0).attr("cy",0).attr("r",function(a){return d(a)}).attr("fill","none").attr("stroke",f)}function buildGraphic(a,b,c,d,e,f,g,h,i){function j(b){var c="arc"+b;k.selectAll("."+c).data(a[b]).enter().append("path").attr("d",l).attr("class",c).attr("fill",g[b]).attr("stroke","none").attr("stroke-width","1").attr("opacity",f)}var k=(jQuery("#networkSelect"),d3.select(".chart").select("svg").append("g").attr("transform","translate("+(c+b.left+b.right)/2+","+(d+b.top+b.bottom)/2+"), rotate("+-1*i+")")),l=d3.svg.arc();l.innerRadius(0),l.outerRadius(function(a){return e(a)}),l.startAngle(function(a,b){return h*b}),l.endAngle(function(a,b){return h*(b+1)});for(var m=0;m<a.length;m++)j(m)}!function(){var a=function(a){var b,c,d,e,f=a(".outerwrapper").width(),g={top:0,right:100,bottom:0,left:100},h=f-g.left-g.right,i=.9*f-g.top-g.bottom,j=["#00642D","#95177E","#F8B436","#EB6B4B","#3BAADC","#96BE17"],k="#666",l=[5,10,15,20,25,30,35],m=.7,n=[],o=[],p=[];a.getScript("http://www.nature.com/polopoly_static/js/d3.v3.min.js",function(){var f=d3.scale.linear().domain([0,35]).range([0,h/2]);a.ajax({url:"data/table.html",dataType:"text",success:function(q){b=a(q).find("tbody tr");for(var r=0;r<b.length;r++){n.push(new Array);for(var s=1;s<b.eq(r).find("td").length-1;s++)n[r].push(b.eq(r).find("td").eq(s).text());p.push(b.eq(r).find("td").eq(0).text())}c=a(q).find("thead tr").find("th");for(var r=1;r<c.length-1;r++)o.push(c.eq(r).text());d=2*Math.PI/n[0].length,e=180/n[0].length,buildSVG(g,h,i),buildGraphic(n,g,h,i,f,m,j,d,e),buildScales(g,h,i,f,l,k),buildLines(g,h,i,f,l,n[0].length,k,e),buildLabels(g,h,i,f,l,o,d),buildTicks(g,h,i,f,l),buildCheckboxes(p,j,m,k),fadeOutArcs(m)}})})};setTimeout(function(){"undefined"!=typeof jQuery?a(jQuery):setTimeout(arguments.callee,60)},60)}();